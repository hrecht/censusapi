<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Accessing microdata • censusapi</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.9/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Accessing microdata">
<meta name="description" content="Access Census microdata.
">
<meta property="og:description" content="Access Census microdata.
">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">censusapi</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.9.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/getting-started.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/getting-started.html">Getting started with censusapi</a></li>
    <li><a class="dropdown-item" href="../articles/frequently-asked-questions.html">Frequently asked questions</a></li>
    <li><a class="dropdown-item" href="../articles/example-list.html">censusapi examples</a></li>
    <li><a class="dropdown-item" href="../articles/accessing-microdata.html">Accessing microdata</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/hrecht/censusapi/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">


<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Accessing microdata</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/hrecht/censusapi/blob/HEAD/vignettes/articles/accessing-microdata.Rmd" class="external-link"><code>vignettes/articles/accessing-microdata.Rmd</code></a></small>
      <div class="d-none name"><code>accessing-microdata.Rmd</code></div>
    </div>

    
    
<p>This package provides basic support for the Census’s new microdata
APIs, using the same <code><a href="../reference/getCensus.html">getCensus()</a></code> functions used for summary
data. Getting the data with <code><a href="../reference/getCensus.html">getCensus()</a></code> is easy. Using it
responsibly takes some homework.</p>
<div class="section level2">
<h2 id="about-microdata">About microdata<a class="anchor" aria-label="anchor" href="#about-microdata"></a>
</h2>
<p>Microdata contains individual-level responses: one row per person. It
is a vital tool to perform custom analysis, but with great power comes
great responsibility. Appropriately weighting the individual-level
responses is required. You’ll often need to work with household
relationships and will need to handle responses that aren’t in the
universe of the question (for example, removing children in an analysis
about college graduation rate.)</p>
<p>If you’re new to working with microdata you’ll need to do some
reading before diving in. Here are some resources from the Census
Bureau:</p>
<ul>
<li>
<a href="https://www.census.gov/data/academy/data-gems/2020/what-is-microdata-and-why-should-i-use-it.html" class="external-link">What
is microdata and why should I use it?</a> (video and transcript)</li>
<li>
<a href="https://www.census.gov/data/developers/guidance/microdata-api-user-guide.What_is_Public_Use_Microdata.html" class="external-link">Census
Microdata API User Guide</a> (pdf)</li>
<li><a href="https://www.census.gov/data/developers/data-sets/census-microdata-api.html" class="external-link">Microdata
API documentation</a></li>
</ul>
<p>As for all other endpoints, <code>censusapi</code> retrieves the data
so that you can perform your own analysis using your methodology of
choice. If you’re looking for an interactive microdata analysis tool,
try the <a href="https://data.census.gov/mdat/#/" class="external-link">data.census.gov
microdata interactive tool</a> or the <a href="https://cps.ipums.org/cps/sda.shtml" class="external-link">IPUMS online data analysis
tool</a>.</p>
<p>Once you’ve learned how to use microdata and gained and understanding
of weighting, getting the data using <code>censusapi</code> is
simple.</p>
</div>
<div class="section level2">
<h2 id="getting-microdata-with-censusapi">Getting microdata with censusapi<a class="anchor" aria-label="anchor" href="#getting-microdata-with-censusapi"></a>
</h2>
<p>As an example, we’ll get data from the 2020 <a href="https://www.census.gov/data/developers/data-sets/census-microdata-api/cps/voting.html" class="external-link">Current
Population Survey Voting Supplement.</a> This survey asks people if they
voted, how, and when, and includes useful demographic data.</p>
<p>See the available variables:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">voting_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/listCensusMetadata.html">listCensusMetadata</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"cps/voting/nov"</span>,</span>
<span>    vintage <span class="op">=</span> <span class="fl">2020</span>,</span>
<span>    type <span class="op">=</span> <span class="st">"variables"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">voting_vars</span><span class="op">)</span></span></code></pre></div>
<div class="kable-table">
<table style="width:100%;" class="table">
<colgroup>
<col width="4%">
<col width="32%">
<col width="21%">
<col width="8%">
<col width="3%">
<col width="3%">
<col width="8%">
<col width="10%">
<col width="6%">
</colgroup>
<thead><tr class="header">
<th align="left">name</th>
<th align="left">label</th>
<th align="left">concept</th>
<th align="left">predicateType</th>
<th align="left">group</th>
<th align="left">limit</th>
<th align="left">predicateOnly</th>
<th align="left">suggested_weight</th>
<th align="left">is_weight</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">for</td>
<td align="left">Census API FIPS ‘for’ clause</td>
<td align="left">Census API Geography Specification</td>
<td align="left">fips-for</td>
<td align="left">N/A</td>
<td align="left">0</td>
<td align="left">TRUE</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">in</td>
<td align="left">Census API FIPS ‘in’ clause</td>
<td align="left">Census API Geography Specification</td>
<td align="left">fips-in</td>
<td align="left">N/A</td>
<td align="left">0</td>
<td align="left">TRUE</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">ucgid</td>
<td align="left">Uniform Census Geography Identifier clause</td>
<td align="left">Census API Geography Specification</td>
<td align="left">ucgid</td>
<td align="left">N/A</td>
<td align="left">0</td>
<td align="left">TRUE</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">PEEDUCA</td>
<td align="left">Demographics-highest level of school completed</td>
<td align="left">NA</td>
<td align="left">int</td>
<td align="left">N/A</td>
<td align="left">0</td>
<td align="left">NA</td>
<td align="left">PWSSWGT</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">PUBUS1</td>
<td align="left">Labor Force-unpaid work in family
business/farm,y/n</td>
<td align="left">NA</td>
<td align="left">int</td>
<td align="left">N/A</td>
<td align="left">0</td>
<td align="left">NA</td>
<td align="left">PWCMPWGT</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">PRCOW1</td>
<td align="left">Indus.&amp;Occ.-(main job)class of worker-recode</td>
<td align="left">NA</td>
<td align="left">int</td>
<td align="left">N/A</td>
<td align="left">0</td>
<td align="left">NA</td>
<td align="left">PWCMPWGT</td>
<td align="left">NA</td>
</tr>
</tbody>
</table>
</div>
<p>From the CPS Voting supplement, get data on method of voting in New
York state using <code>PES5</code> (Vote in person or by mail?) and
<code>PESEX</code> (gender), along with the appropriate weighting
variable, <code>PWSSWGT</code>. We’ll only get data for people with a
response of <code>1</code> (yes) to <code>PES1</code> (Did you
vote?).</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cps_voting</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getCensus.html">getCensus</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"cps/voting/nov"</span>,</span>
<span>    vintage <span class="op">=</span> <span class="fl">2020</span>,</span>
<span>    vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PES5"</span>, <span class="st">"PESEX"</span>, <span class="st">"PWSSWGT"</span><span class="op">)</span>,</span>
<span>    region <span class="op">=</span> <span class="st">"state:36"</span>,</span>
<span>    PES1 <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">cps_voting</span><span class="op">)</span></span></code></pre></div>
<div class="kable-table">
<table class="table">
<thead><tr class="header">
<th align="left">state</th>
<th align="right">PES5</th>
<th align="right">PESEX</th>
<th align="right">PWSSWGT</th>
<th align="right">PES1</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">36</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">4571.216</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">36</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">4806.369</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">36</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">3440.301</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">36</td>
<td align="right">-3</td>
<td align="right">1</td>
<td align="right">5204.566</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">36</td>
<td align="right">-3</td>
<td align="right">2</td>
<td align="right">4993.819</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">36</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">4602.958</td>
<td align="right">1</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level2">
<h2 id="making-a-data-dictionary">Making a data dictionary<a class="anchor" aria-label="anchor" href="#making-a-data-dictionary"></a>
</h2>
<p>Most of microdata variables are encoded, which means that your data
will have a lot of numbers instead of text labels.</p>
<p>A data dictionary, which includes the definitions and labels for
every variable in the dataset, is helpful. This is possible with
<code>listCensusMetasdata(include_values = "TRUE)</code> returns a data
dictionary with one row for each variable-label pair. That means if
there are 30 codes for a given variable, it will have 30 rows in the
data dictionary. Variables that don’t have value labels in the metadata
will have only one row.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">voting_dict</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/listCensusMetadata.html">listCensusMetadata</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"cps/voting/nov"</span>,</span>
<span>    vintage <span class="op">=</span> <span class="fl">2020</span>,</span>
<span>    type <span class="op">=</span> <span class="st">"variables"</span>,</span>
<span>    include_values <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">voting_dict</span><span class="op">)</span></span></code></pre></div>
<div class="kable-table">
<table class="table">
<colgroup>
<col width="3%">
<col width="22%">
<col width="16%">
<col width="6%">
<col width="2%">
<col width="2%">
<col width="6%">
<col width="8%">
<col width="4%">
<col width="5%">
<col width="18%">
</colgroup>
<thead><tr class="header">
<th align="left">name</th>
<th align="left">label</th>
<th align="left">concept</th>
<th align="left">predicateType</th>
<th align="left">group</th>
<th align="left">limit</th>
<th align="left">predicateOnly</th>
<th align="left">suggested_weight</th>
<th align="left">is_weight</th>
<th align="left">values_code</th>
<th align="left">values_label</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">for</td>
<td align="left">Census API FIPS ‘for’ clause</td>
<td align="left">Census API Geography Specification</td>
<td align="left">fips-for</td>
<td align="left">N/A</td>
<td align="left">0</td>
<td align="left">TRUE</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">in</td>
<td align="left">Census API FIPS ‘in’ clause</td>
<td align="left">Census API Geography Specification</td>
<td align="left">fips-in</td>
<td align="left">N/A</td>
<td align="left">0</td>
<td align="left">TRUE</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">ucgid</td>
<td align="left">Uniform Census Geography Identifier clause</td>
<td align="left">Census API Geography Specification</td>
<td align="left">ucgid</td>
<td align="left">N/A</td>
<td align="left">0</td>
<td align="left">TRUE</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">PEEDUCA</td>
<td align="left">Demographics-highest level of school completed</td>
<td align="left">NA</td>
<td align="left">int</td>
<td align="left">N/A</td>
<td align="left">0</td>
<td align="left">NA</td>
<td align="left">PWSSWGT</td>
<td align="left">NA</td>
<td align="left">46</td>
<td align="left">DOCTORATE DEGREE(EX:PhD,EdD)</td>
</tr>
<tr class="odd">
<td align="left">PEEDUCA</td>
<td align="left">Demographics-highest level of school completed</td>
<td align="left">NA</td>
<td align="left">int</td>
<td align="left">N/A</td>
<td align="left">0</td>
<td align="left">NA</td>
<td align="left">PWSSWGT</td>
<td align="left">NA</td>
<td align="left">33</td>
<td align="left">5th Or 6th Grade</td>
</tr>
<tr class="even">
<td align="left">PEEDUCA</td>
<td align="left">Demographics-highest level of school completed</td>
<td align="left">NA</td>
<td align="left">int</td>
<td align="left">N/A</td>
<td align="left">0</td>
<td align="left">NA</td>
<td align="left">PWSSWGT</td>
<td align="left">NA</td>
<td align="left">44</td>
<td align="left">MASTER’S DEGREE(EX:MA,MS,MEng,MEd,MSW)</td>
</tr>
</tbody>
</table>
</div>
<p>You can also look up the meaning of those codes for a single variable
using the same function, <code><a href="../reference/listCensusMetadata.html">listCensusMetadata()</a></code>. Here are the
values of <code>PES5</code>, the variable for “Vote in person or by
mail?”</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">PES5_values</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/listCensusMetadata.html">listCensusMetadata</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"cps/voting/nov"</span>,</span>
<span>    vintage <span class="op">=</span> <span class="fl">2020</span>,</span>
<span>    type <span class="op">=</span> <span class="st">"values"</span>,</span>
<span>    variable <span class="op">=</span> <span class="st">"PES5"</span><span class="op">)</span></span>
<span><span class="va">PES5_values</span></span></code></pre></div>
<div class="kable-table">
<table class="table">
<thead><tr class="header">
<th align="left">code</th>
<th align="left">label</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">2</td>
<td align="left">By Mail</td>
</tr>
<tr class="even">
<td align="left">-2</td>
<td align="left">Don’t Know</td>
</tr>
<tr class="odd">
<td align="left">1</td>
<td align="left">In person</td>
</tr>
<tr class="even">
<td align="left">-1</td>
<td align="left">Not in Universe</td>
</tr>
<tr class="odd">
<td align="left">-9</td>
<td align="left">No Response</td>
</tr>
<tr class="even">
<td align="left">-3</td>
<td align="left">Refused</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level2">
<h2 id="other-ways-to-access-microdata">Other ways to access microdata<a class="anchor" aria-label="anchor" href="#other-ways-to-access-microdata"></a>
</h2>
<p>The Census Bureau microdata APIs are helpful for working with a
limited just-released datasets. But they’re not your only option. Some
other ways to get microdata are:</p>
<ul>
<li>Retrieve standardized, cleaned microdata data from <a href="https://www.ipums.org/" class="external-link">IPUMS</a> and import with the <a href="https://tech.popdata.org/ipumsr/" class="external-link">impumsr package</a>. IPUMS is
widely used in research when the data needed is not brand new. I highly
recommend that you check out IPUMS’ cleaned files microdata files as
well as historic geographic data. These standardized files are generally
released months to a year after the raw Census microdata that is
available directly from the Census Bureau.</li>
<li>Download complete bulk files from the Census FTPs (file transfer
protocols.) This is helpful if you need the a large number of variables.
You might run in to size limitations getting many variables through the
APIs.</li>
<li>Retrieve American Community Survey microdata via the Census APIs
with <a href="https://walker-data.com/tidycensus/articles/pums-data.html" class="external-link">tidycensus</a>,
which has helpful functions for working with those endpoints.</li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Hannah Recht.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
