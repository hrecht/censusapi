<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="If you're new to censusapi, start here.
">
<title>Getting started with censusapi • censusapi</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.9/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Getting started with censusapi">
<meta property="og:description" content="If you're new to censusapi, start here.
">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">censusapi</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.9.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/getting-started.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/getting-started.html">Getting started with censusapi</a>
    <a class="dropdown-item" href="../articles/frequently-asked-questions.html">Frequently asked questions</a>
    <a class="dropdown-item" href="../articles/example-list.html">censusapi examples</a>
    <a class="dropdown-item" href="../articles/accessing-microdata.html">Accessing microdata</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/hrecht/censusapi/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">


<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Getting started with censusapi</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/hrecht/censusapi/blob/HEAD/vignettes/articles/getting-started.Rmd" class="external-link"><code>vignettes/articles/getting-started.Rmd</code></a></small>
      <div class="d-none name"><code>getting-started.Rmd</code></div>
    </div>

    
    
<p><code>censusapi</code> is a lightweight package that helps you
retrieve data from the U.S. Census Bureau’s <a href="https://www.census.gov/data/developers.html" class="external-link">1,600 API
endpoints</a> using one simple function, <code><a href="../reference/getCensus.html">getCensus()</a></code>.
Additional functions provide information about what datasets are
available and how to use them.</p>
<p>This package returns the data as-is with the original variable names
created by the Census Bureau and any quirks inherent in the data. Each
dataset is a little different. Some are documented thoroughly, others
have documentation that is sparse. Sometimes variable names change each
year. This package can’t overcome those challenges, but tries to make it
easier to get the data for use in your analysis. Make sure to thoroughly
read the <a href="https://www.census.gov/data/developers/data-sets.html" class="external-link">documentation</a>
for your dataset and see below for how to <a href="#Other-ways-to-get-help">get help with Census data.</a></p>
<div class="section level2">
<h2 id="api-key-setup">API key setup<a class="anchor" aria-label="anchor" href="#api-key-setup"></a>
</h2>
<p><code>censusapi</code> recommends but does not require using an API
key from the U.S. Census Bureau. The Census Bureau may limit the number
of requests made by your IP address if you do not use an API key.</p>
<p>You can <a href="http://api.census.gov/data/key_signup.html" class="external-link">sign up
online</a> to receive a key, which will be sent to your provided email
address.</p>
<p>If you save the key with the name <code>CENSUS_KEY</code> or
<code>CENSUS_API_KEY</code> in your Renviron file,
<code>censusapi</code> will use it by default without any extra work on
your part.</p>
<p>To save your API key, within R, run:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Check to see if you already have a CENSUS_KEY or CENSUS_API_KEY saved</span></span>
<span><span class="co"># If so, no further action is needed</span></span>
<span><span class="fu"><a href="../reference/get_api_key.html">get_api_key</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># If not, add your key to your Renviron file</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>CENSUS_KEY<span class="op">=</span><span class="va">PASTEYOURKEYHERE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Reload .Renviron</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/readRenviron.html" class="external-link">readRenviron</a></span><span class="op">(</span><span class="st">"~/.Renviron"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check to see that the expected key is output in your R console</span></span>
<span><span class="fu"><a href="../reference/get_api_key.html">get_api_key</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>In some instances you might not want to put your key in your
.Renviron - for example, if you’re on a shared school computer. You can
always choose to manually set <code>key = "PASTEYOURKEYHERE"</code> as
an argument in <code><a href="../reference/getCensus.html">getCensus()</a></code> if you prefer.</p>
</div>
<div class="section level2">
<h2 id="basic-usage">Basic usage<a class="anchor" aria-label="anchor" href="#basic-usage"></a>
</h2>
<p>The main function in <code>censusapi</code> is
<code><a href="../reference/getCensus.html">getCensus()</a></code>, which makes an API call to a given endpoint
and returns a data frame with results. Each API has slightly different
parameters, but there are always a few required arguments:</p>
<ul>
<li>
<code>name</code>: the programmatic name of the endpoint as defined
by the Census, like “acs/acs5” or “timeseries/bds/firms”</li>
<li>
<code>vintage</code>: the survey year, required for aggregate or
microdata APIs</li>
<li>
<code>vars</code>: a list of variables to retrieve</li>
<li>
<code>region</code>: the geography level to retrieve, such as state
or county, required for nearly all endpoints</li>
</ul>
<p>Some APIs have additional required or optional arguments, like
<code>time</code> for some timeseries datasets. Check the specific <a href="https://www.census.gov/data/developers/data-sets.html" class="external-link">documentation</a>
for your API and explore its metadata with
<code><a href="../reference/listCensusMetadata.html">listCensusMetadata()</a></code> to see what options are allowed.</p>
<p>Let’s walk through an example getting uninsured rates using the <a href="https://www.census.gov/data/developers/data-sets/Health-Insurance-Statistics.html" class="external-link">Small
Area Health Insurance Estimates API</a>, which provides detailed annual
state-level and county-level estimates of health insurance rates for
people below age 65.</p>
<div class="section level3">
<h3 id="choosing-variables">Choosing variables<a class="anchor" aria-label="anchor" href="#choosing-variables"></a>
</h3>
<p><code>censusapi</code> includes a metadata function called
<code><a href="../reference/listCensusMetadata.html">listCensusMetadata()</a></code> to get information about an API’s
variable and geography options. Let’s see what variables are available
in the SAHIE API:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://www.hrecht.com/censusapi/">censusapi</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">sahie_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/listCensusMetadata.html">listCensusMetadata</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"timeseries/healthins/sahie"</span>, </span>
<span>    type <span class="op">=</span> <span class="st">"variables"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># See the full list of variables</span></span>
<span><span class="va">sahie_vars</span><span class="op">$</span><span class="va">name</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;  [1] "for"        "in"         "time"       "NIPR_LB90"  "NIPR_PT"   </span></span>
<span><span class="co">#&gt;  [6] "AGECAT"     "GEOID"      "NIC_PT"     "STATE"      "RACE_DESC" </span></span>
<span><span class="co">#&gt; [11] "YEAR"       "IPRCAT"     "PCTIC_UB90" "NIPR_MOE"   "PCTUI_LB90"</span></span>
<span><span class="co">#&gt; [16] "NIC_MOE"    "US"         "COUNTY"     "PCTUI_MOE"  "NUI_UB90"  </span></span>
<span><span class="co">#&gt; [21] "NIC_UB90"   "NUI_MOE"    "SEXCAT"     "PCTUI_PT"   "PCTIC_LB90"</span></span>
<span><span class="co">#&gt; [26] "PCTUI_UB90" "NUI_PT"     "STABREV"    "AGE_DESC"   "NAME"      </span></span>
<span><span class="co">#&gt; [31] "NIC_LB90"   "PCTIC_PT"   "PCTIC_MOE"  "IPR_DESC"   "NUI_LB90"  </span></span>
<span><span class="co">#&gt; [36] "NIPR_UB90"  "GEOCAT"     "SEX_DESC"   "RACECAT"</span></span></code></pre>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Full info on the first several variables</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">sahie_vars</span><span class="op">)</span></span></code></pre></div>
<div class="kable-table">
<table class="table">
<colgroup>
<col width="5%">
<col width="47%">
<col width="17%">
<col width="7%">
<col width="3%">
<col width="3%">
<col width="7%">
<col width="9%">
</colgroup>
<thead><tr class="header">
<th align="left">name</th>
<th align="left">label</th>
<th align="left">concept</th>
<th align="left">predicateType</th>
<th align="left">group</th>
<th align="left">limit</th>
<th align="left">predicateOnly</th>
<th align="left">required</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">for</td>
<td align="left">Census API FIPS ‘for’ clause</td>
<td align="left">Census API Geography Specification</td>
<td align="left">fips-for</td>
<td align="left">N/A</td>
<td align="left">0</td>
<td align="left">TRUE</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">in</td>
<td align="left">Census API FIPS ‘in’ clause</td>
<td align="left">Census API Geography Specification</td>
<td align="left">fips-in</td>
<td align="left">N/A</td>
<td align="left">0</td>
<td align="left">TRUE</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">time</td>
<td align="left">ISO-8601 Date/Time value</td>
<td align="left">Census API Date/Time Specification</td>
<td align="left">datetime</td>
<td align="left">N/A</td>
<td align="left">0</td>
<td align="left">TRUE</td>
<td align="left">true</td>
</tr>
<tr class="even">
<td align="left">NIPR_LB90</td>
<td align="left">Number in Demographic Group for Selected Income Range,
Upper Bound for 90% Confidence Interval</td>
<td align="left">NA</td>
<td align="left">int</td>
<td align="left">N/A</td>
<td align="left">0</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">NIPR_PT</td>
<td align="left">Number in Demographic Group for Selected Income Range,
Estimate</td>
<td align="left">NA</td>
<td align="left">int</td>
<td align="left">N/A</td>
<td align="left">0</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">AGECAT</td>
<td align="left">Age Category</td>
<td align="left">NA</td>
<td align="left">string</td>
<td align="left">N/A</td>
<td align="left">0</td>
<td align="left">NA</td>
<td align="left">default displayed</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level3">
<h3 id="choosing-regions">Choosing regions<a class="anchor" aria-label="anchor" href="#choosing-regions"></a>
</h3>
<p>We can also use <code>listCensusMetadata</code> to see which
geographic levels are available.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/listCensusMetadata.html">listCensusMetadata</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"timeseries/healthins/sahie"</span>, </span>
<span>    type <span class="op">=</span> <span class="st">"geography"</span><span class="op">)</span></span></code></pre></div>
<div class="kable-table">
<table class="table">
<colgroup>
<col width="9%">
<col width="14%">
<col width="8%">
<col width="18%">
<col width="12%">
<col width="12%">
<col width="24%">
</colgroup>
<thead><tr class="header">
<th align="left">name</th>
<th align="left">geoLevelId</th>
<th align="left">limit</th>
<th align="left">referenceDate</th>
<th align="left">requires</th>
<th align="left">wildcard</th>
<th align="left">optionalWithWCFor</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">us</td>
<td align="left">010</td>
<td align="left">1</td>
<td align="left">2015-01-01</td>
<td align="left">NULL</td>
<td align="left">NULL</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">county</td>
<td align="left">050</td>
<td align="left">3142</td>
<td align="left">2015-01-01</td>
<td align="left">state</td>
<td align="left">state</td>
<td align="left">state</td>
</tr>
<tr class="odd">
<td align="left">state</td>
<td align="left">040</td>
<td align="left">52</td>
<td align="left">2015-01-01</td>
<td align="left">NULL</td>
<td align="left">NULL</td>
<td align="left">NA</td>
</tr>
</tbody>
</table>
</div>
<p>This API has three geographic levels: <code>us</code>,
<code>county</code>, and <code>state</code>. County data can be queried
for all counties nationally or within a specific state.</p>
</div>
<div class="section level3">
<h3 id="making-a-censusapi-call">Making a censusapi call<a class="anchor" aria-label="anchor" href="#making-a-censusapi-call"></a>
</h3>
<p>First, using <code><a href="../reference/getCensus.html">getCensus()</a></code>, let’s get the percent
(<code>PCTUI_PT</code>) and number (<code>NUI_PT</code>) of people who
are uninsured, using the wildcard star (*) to retrieve data for all
counties.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sahie_counties</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getCensus.html">getCensus</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"timeseries/healthins/sahie"</span>,</span>
<span>    vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"NAME"</span>, <span class="st">"PCTUI_PT"</span>, <span class="st">"NUI_PT"</span><span class="op">)</span>, </span>
<span>    region <span class="op">=</span> <span class="st">"county:*"</span>, </span>
<span>    time <span class="op">=</span> <span class="fl">2021</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">sahie_counties</span><span class="op">)</span></span></code></pre></div>
<div class="kable-table">
<table class="table">
<thead><tr class="header">
<th align="left">time</th>
<th align="left">state</th>
<th align="left">county</th>
<th align="left">NAME</th>
<th align="right">PCTUI_PT</th>
<th align="right">NUI_PT</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">2021</td>
<td align="left">01</td>
<td align="left">001</td>
<td align="left">Autauga County, AL</td>
<td align="right">10.0</td>
<td align="right">4912</td>
</tr>
<tr class="even">
<td align="left">2021</td>
<td align="left">01</td>
<td align="left">003</td>
<td align="left">Baldwin County, AL</td>
<td align="right">11.0</td>
<td align="right">20432</td>
</tr>
<tr class="odd">
<td align="left">2021</td>
<td align="left">01</td>
<td align="left">005</td>
<td align="left">Barbour County, AL</td>
<td align="right">12.7</td>
<td align="right">2150</td>
</tr>
<tr class="even">
<td align="left">2021</td>
<td align="left">01</td>
<td align="left">007</td>
<td align="left">Bibb County, AL</td>
<td align="right">11.4</td>
<td align="right">1905</td>
</tr>
<tr class="odd">
<td align="left">2021</td>
<td align="left">01</td>
<td align="left">009</td>
<td align="left">Blount County, AL</td>
<td align="right">12.8</td>
<td align="right">6145</td>
</tr>
<tr class="even">
<td align="left">2021</td>
<td align="left">01</td>
<td align="left">011</td>
<td align="left">Bullock County, AL</td>
<td align="right">12.2</td>
<td align="right">824</td>
</tr>
</tbody>
</table>
</div>
<p>We can also get data on detailed income and demographic groups from
the SAHIE. We’ll use <code>region</code> to specify county-level results
and <code>regionin</code> to filter to Virginia, state code 51. We’ll
get uninsured rates by income group, <code>IPRCAT</code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sahie_virginia</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getCensus.html">getCensus</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"timeseries/healthins/sahie"</span>,</span>
<span>    vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"NAME"</span>, <span class="st">"IPRCAT"</span>, <span class="st">"IPR_DESC"</span>, <span class="st">"PCTUI_PT"</span><span class="op">)</span>, </span>
<span>    region <span class="op">=</span> <span class="st">"county:*"</span>, </span>
<span>    regionin <span class="op">=</span> <span class="st">"state:51"</span>, </span>
<span>    time <span class="op">=</span> <span class="fl">2021</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">sahie_virginia</span>, head <span class="op">=</span> <span class="fl">12L</span><span class="op">)</span></span></code></pre></div>
<div class="kable-table">
<table class="table">
<colgroup>
<col width="6%">
<col width="7%">
<col width="8%">
<col width="25%">
<col width="8%">
<col width="30%">
<col width="11%">
</colgroup>
<thead><tr class="header">
<th align="left">time</th>
<th align="left">state</th>
<th align="left">county</th>
<th align="left">NAME</th>
<th align="left">IPRCAT</th>
<th align="left">IPR_DESC</th>
<th align="right">PCTUI_PT</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">2021</td>
<td align="left">51</td>
<td align="left">001</td>
<td align="left">Accomack County, VA</td>
<td align="left">0</td>
<td align="left">All Incomes</td>
<td align="right">13.4</td>
</tr>
<tr class="even">
<td align="left">2021</td>
<td align="left">51</td>
<td align="left">001</td>
<td align="left">Accomack County, VA</td>
<td align="left">1</td>
<td align="left">&lt;= 200% of Poverty</td>
<td align="right">17.1</td>
</tr>
<tr class="odd">
<td align="left">2021</td>
<td align="left">51</td>
<td align="left">001</td>
<td align="left">Accomack County, VA</td>
<td align="left">2</td>
<td align="left">&lt;= 250% of Poverty</td>
<td align="right">16.8</td>
</tr>
<tr class="even">
<td align="left">2021</td>
<td align="left">51</td>
<td align="left">001</td>
<td align="left">Accomack County, VA</td>
<td align="left">3</td>
<td align="left">&lt;= 138% of Poverty</td>
<td align="right">17.4</td>
</tr>
<tr class="odd">
<td align="left">2021</td>
<td align="left">51</td>
<td align="left">001</td>
<td align="left">Accomack County, VA</td>
<td align="left">4</td>
<td align="left">&lt;= 400% of Poverty</td>
<td align="right">15.6</td>
</tr>
<tr class="even">
<td align="left">2021</td>
<td align="left">51</td>
<td align="left">001</td>
<td align="left">Accomack County, VA</td>
<td align="left">5</td>
<td align="left">138% to 400% of Poverty</td>
<td align="right">14.5</td>
</tr>
</tbody>
</table>
</div>
<p>Because the SAHIE API is a timeseries dataset, as indicated in its
<code>name</code>,, we can get multiple years of data at once by
changing <code>time = YYYY</code> to
<code>time = "from YYYY to YYYY"</code>, or get through the latest data
available using <code>time = "from YYYY"</code>. Let’s get that data for
DeKalb County, Georgia using county fips code 089 and state fips code
13. You can look up fips codes on the <a href="https://www.census.gov/library/reference/code-lists/ansi.html" class="external-link">Census
Bureau website</a>.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sahie_years</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getCensus.html">getCensus</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"timeseries/healthins/sahie"</span>,</span>
<span>    vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"NAME"</span>, <span class="st">"PCTUI_PT"</span><span class="op">)</span>, </span>
<span>    region <span class="op">=</span> <span class="st">"county:089"</span>, </span>
<span>    regionin <span class="op">=</span> <span class="st">"state:13"</span>,</span>
<span>    time <span class="op">=</span> <span class="st">"from 2006"</span><span class="op">)</span></span>
<span><span class="va">sahie_years</span></span></code></pre></div>
<div class="kable-table">
<table class="table">
<thead><tr class="header">
<th align="left">time</th>
<th align="left">state</th>
<th align="left">county</th>
<th align="left">NAME</th>
<th align="right">PCTUI_PT</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">2015</td>
<td align="left">13</td>
<td align="left">089</td>
<td align="left">DeKalb County, GA</td>
<td align="right">16.9</td>
</tr>
<tr class="even">
<td align="left">2016</td>
<td align="left">13</td>
<td align="left">089</td>
<td align="left">DeKalb County, GA</td>
<td align="right">15.3</td>
</tr>
<tr class="odd">
<td align="left">2017</td>
<td align="left">13</td>
<td align="left">089</td>
<td align="left">DeKalb County, GA</td>
<td align="right">15.9</td>
</tr>
<tr class="even">
<td align="left">2018</td>
<td align="left">13</td>
<td align="left">089</td>
<td align="left">DeKalb County, GA</td>
<td align="right">17.1</td>
</tr>
<tr class="odd">
<td align="left">2019</td>
<td align="left">13</td>
<td align="left">089</td>
<td align="left">DeKalb County, GA</td>
<td align="right">16.9</td>
</tr>
<tr class="even">
<td align="left">2020</td>
<td align="left">13</td>
<td align="left">089</td>
<td align="left">DeKalb County, GA</td>
<td align="right">14.0</td>
</tr>
<tr class="odd">
<td align="left">2021</td>
<td align="left">13</td>
<td align="left">089</td>
<td align="left">DeKalb County, GA</td>
<td align="right">14.2</td>
</tr>
<tr class="even">
<td align="left">2006</td>
<td align="left">13</td>
<td align="left">089</td>
<td align="left">DeKalb County, GA</td>
<td align="right">19.0</td>
</tr>
<tr class="odd">
<td align="left">2007</td>
<td align="left">13</td>
<td align="left">089</td>
<td align="left">DeKalb County, GA</td>
<td align="right">17.2</td>
</tr>
<tr class="even">
<td align="left">2008</td>
<td align="left">13</td>
<td align="left">089</td>
<td align="left">DeKalb County, GA</td>
<td align="right">22.5</td>
</tr>
<tr class="odd">
<td align="left">2009</td>
<td align="left">13</td>
<td align="left">089</td>
<td align="left">DeKalb County, GA</td>
<td align="right">22.9</td>
</tr>
<tr class="even">
<td align="left">2010</td>
<td align="left">13</td>
<td align="left">089</td>
<td align="left">DeKalb County, GA</td>
<td align="right">25.8</td>
</tr>
<tr class="odd">
<td align="left">2011</td>
<td align="left">13</td>
<td align="left">089</td>
<td align="left">DeKalb County, GA</td>
<td align="right">23.9</td>
</tr>
<tr class="even">
<td align="left">2012</td>
<td align="left">13</td>
<td align="left">089</td>
<td align="left">DeKalb County, GA</td>
<td align="right">21.7</td>
</tr>
<tr class="odd">
<td align="left">2013</td>
<td align="left">13</td>
<td align="left">089</td>
<td align="left">DeKalb County, GA</td>
<td align="right">22.1</td>
</tr>
<tr class="even">
<td align="left">2014</td>
<td align="left">13</td>
<td align="left">089</td>
<td align="left">DeKalb County, GA</td>
<td align="right">19.4</td>
</tr>
</tbody>
</table>
</div>
<p>We can also filter the data by income group using the
<code>IPRCAT</code> variable. See the possible values of
<code>IPRCAT</code> using <code><a href="../reference/listCensusMetadata.html">listCensusMetadata()</a></code>.</p>
<p><code>IPRCAT = 3</code> represents &lt;=138% of the federal poverty
line. That is the threshold for <a href="https://www.healthcare.gov/glossary/federal-poverty-level-fpl/" class="external-link">Medicaid
eligibility</a> in states that have expanded it under the Affordable
Care Act.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/listCensusMetadata.html">listCensusMetadata</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"timeseries/healthins/sahie"</span>,</span>
<span>    type <span class="op">=</span> <span class="st">"values"</span>,</span>
<span>    variable <span class="op">=</span> <span class="st">"IPRCAT"</span><span class="op">)</span></span></code></pre></div>
<div class="kable-table">
<table class="table">
<thead><tr class="header">
<th align="left">code</th>
<th align="left">label</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">0</td>
<td align="left">All Incomes</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="left">Less than or Equal to 200% of Poverty</td>
</tr>
<tr class="odd">
<td align="left">2</td>
<td align="left">Less than or Equal to 250% of Poverty</td>
</tr>
<tr class="even">
<td align="left">3</td>
<td align="left">Less than or Equal to 138% of Poverty</td>
</tr>
<tr class="odd">
<td align="left">4</td>
<td align="left">Less than or Equal to 400% of Poverty</td>
</tr>
<tr class="even">
<td align="left">5</td>
<td align="left">138% to 400% Poverty</td>
</tr>
</tbody>
</table>
</div>
<p>Getting this data for Los Angeles county (fips code 06037) we can see
the dramatic decrease in the uninsured rate in this income group after
California expanded Medicaid.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sahie_138</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getCensus.html">getCensus</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"timeseries/healthins/sahie"</span>,</span>
<span>    vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"NAME"</span>, <span class="st">"PCTUI_PT"</span>, <span class="st">"NUI_PT"</span><span class="op">)</span>, </span>
<span>    region <span class="op">=</span> <span class="st">"county:037"</span>, </span>
<span>    regionin <span class="op">=</span> <span class="st">"state:06"</span>, </span>
<span>    IPRCAT <span class="op">=</span> <span class="fl">3</span>,</span>
<span>    time <span class="op">=</span> <span class="st">"from 2010"</span><span class="op">)</span></span>
<span><span class="va">sahie_138</span></span></code></pre></div>
<div class="kable-table">
<table class="table">
<thead><tr class="header">
<th align="left">time</th>
<th align="left">state</th>
<th align="left">county</th>
<th align="left">NAME</th>
<th align="right">PCTUI_PT</th>
<th align="right">NUI_PT</th>
<th align="left">IPRCAT</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">2015</td>
<td align="left">06</td>
<td align="left">037</td>
<td align="left">Los Angeles County, CA</td>
<td align="right">17.8</td>
<td align="right">402977</td>
<td align="left">3</td>
</tr>
<tr class="even">
<td align="left">2016</td>
<td align="left">06</td>
<td align="left">037</td>
<td align="left">Los Angeles County, CA</td>
<td align="right">15.4</td>
<td align="right">329251</td>
<td align="left">3</td>
</tr>
<tr class="odd">
<td align="left">2017</td>
<td align="left">06</td>
<td align="left">037</td>
<td align="left">Los Angeles County, CA</td>
<td align="right">14.3</td>
<td align="right">281842</td>
<td align="left">3</td>
</tr>
<tr class="even">
<td align="left">2018</td>
<td align="left">06</td>
<td align="left">037</td>
<td align="left">Los Angeles County, CA</td>
<td align="right">13.9</td>
<td align="right">255520</td>
<td align="left">3</td>
</tr>
<tr class="odd">
<td align="left">2019</td>
<td align="left">06</td>
<td align="left">037</td>
<td align="left">Los Angeles County, CA</td>
<td align="right">15.1</td>
<td align="right">254740</td>
<td align="left">3</td>
</tr>
<tr class="even">
<td align="left">2020</td>
<td align="left">06</td>
<td align="left">037</td>
<td align="left">Los Angeles County, CA</td>
<td align="right">14.4</td>
<td align="right">230380</td>
<td align="left">3</td>
</tr>
<tr class="odd">
<td align="left">2021</td>
<td align="left">06</td>
<td align="left">037</td>
<td align="left">Los Angeles County, CA</td>
<td align="right">15.1</td>
<td align="right">249186</td>
<td align="left">3</td>
</tr>
<tr class="even">
<td align="left">2010</td>
<td align="left">06</td>
<td align="left">037</td>
<td align="left">Los Angeles County, CA</td>
<td align="right">37.4</td>
<td align="right">894385</td>
<td align="left">3</td>
</tr>
<tr class="odd">
<td align="left">2011</td>
<td align="left">06</td>
<td align="left">037</td>
<td align="left">Los Angeles County, CA</td>
<td align="right">35.1</td>
<td align="right">867577</td>
<td align="left">3</td>
</tr>
<tr class="even">
<td align="left">2012</td>
<td align="left">06</td>
<td align="left">037</td>
<td align="left">Los Angeles County, CA</td>
<td align="right">34.4</td>
<td align="right">865516</td>
<td align="left">3</td>
</tr>
<tr class="odd">
<td align="left">2013</td>
<td align="left">06</td>
<td align="left">037</td>
<td align="left">Los Angeles County, CA</td>
<td align="right">33.0</td>
<td align="right">818978</td>
<td align="left">3</td>
</tr>
<tr class="even">
<td align="left">2014</td>
<td align="left">06</td>
<td align="left">037</td>
<td align="left">Los Angeles County, CA</td>
<td align="right">24.9</td>
<td align="right">607542</td>
<td align="left">3</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section level2">
<h2 id="finding-your-api">Finding your API<a class="anchor" aria-label="anchor" href="#finding-your-api"></a>
</h2>
<p>What if you don’t already know your dataset’s <code>name</code>? To
see a current table of every available endpoint, use
<code><a href="../reference/listCensusApis.html">listCensusApis()</a></code>. This data frame includes useful
information for making your API call, including the dataset’s name,
vintage if applicable, description, and title.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">apis</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/listCensusApis.html">listCensusApis</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">apis</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;  [1] "title"       "name"        "vintage"     "type"        "temporal"   </span></span>
<span><span class="co">#&gt;  [6] "spatial"     "url"         "modified"    "description" "contact"</span></span></code></pre>
<p>The columns included are:</p>
<ul>
<li>title: Short written description of the dataset.</li>
<li>name: Programmatic name of the dataset, to be used with
<code>censusapi</code> functions.</li>
<li>vintage: Year of the survey, for use with microdata and aggregate
datasets.</li>
<li>type: Dataset type, which is either “Aggregate”, “Microdata”, or
“Timeseries”.</li>
<li>temporal: Time period of the dataset. Warning: not always
documented.</li>
<li>spatial: Spatial region of the dataset. Warning: not always
documented.</li>
<li>url: Base URL of the dataset endpoint.</li>
<li>modified: Date last modified. Warning: sometimes out of date.</li>
<li>description: Long written description of the dataset.</li>
<li>contact: Email address for specific questions about the Census
Bureau survey.</li>
</ul>
<p>You can also get information on a subset of datasets using the
optional <code>name</code> and/or <code>vintage</code> parameters. For
example, get information about 2020 Decennial Census datasets.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dec_apis</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/listCensusApis.html">listCensusApis</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"dec"</span>, vintage <span class="op">=</span> <span class="fl">2020</span><span class="op">)</span></span>
<span><span class="va">dec_apis</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span></span></code></pre></div>
<div class="kable-table">
<table class="table">
<colgroup>
<col width="56%">
<col width="8%">
<col width="3%">
<col width="4%">
<col width="4%">
<col width="21%">
</colgroup>
<thead><tr class="header">
<th align="left">title</th>
<th align="left">name</th>
<th align="right">vintage</th>
<th align="left">type</th>
<th align="left">temporal</th>
<th align="left">spatial</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Decennial Census: 118th Congressional District Summary
File</td>
<td align="left">dec/cd118</td>
<td align="right">2020</td>
<td align="left">Aggregate</td>
<td align="left">2020/2020</td>
<td align="left">US</td>
</tr>
<tr class="even">
<td align="left">Decennial Census of Island Areas: American Samoa
Detailed Crosstabulations</td>
<td align="left">dec/crosstabas</td>
<td align="right">2020</td>
<td align="left">Aggregate</td>
<td align="left">2020/2020</td>
<td align="left">American Samoa</td>
</tr>
<tr class="odd">
<td align="left">Decennial Census of Island Areas: Guam Detailed
Crosstabulations</td>
<td align="left">dec/crosstabgu</td>
<td align="right">2020</td>
<td align="left">Aggregate</td>
<td align="left">2020/2020</td>
<td align="left">Guam</td>
</tr>
<tr class="even">
<td align="left">Decennial Census of Island Areas: Commonwealth of the
Northern Mariana Islands Detailed Crosstabulations</td>
<td align="left">dec/crosstabmp</td>
<td align="right">2020</td>
<td align="left">Aggregate</td>
<td align="left">2020/2020</td>
<td align="left">Northern Mariana Islands</td>
</tr>
<tr class="odd">
<td align="left">Decennial Census of Island Areas: U.S. Virgin Islands
Detailed Crosstabulations</td>
<td align="left">dec/crosstabvi</td>
<td align="right">2020</td>
<td align="left">Aggregate</td>
<td align="left">2020/2020</td>
<td align="left">U.S. Virgin Islands</td>
</tr>
<tr class="even">
<td align="left">Decennial Census: Detailed Demographic and Housing
Characteristics File A</td>
<td align="left">dec/ddhca</td>
<td align="right">2020</td>
<td align="left">Aggregate</td>
<td align="left">2020/2020</td>
<td align="left">United States</td>
</tr>
<tr class="odd">
<td align="left">Decennial Census: Demographic and Housing
Characteristics</td>
<td align="left">dec/dhc</td>
<td align="right">2020</td>
<td align="left">Aggregate</td>
<td align="left">2020/2020</td>
<td align="left">United States</td>
</tr>
<tr class="even">
<td align="left">Decennial Census of Island Areas: American Samoa
Demographic and Housing Characteristics</td>
<td align="left">dec/dhcas</td>
<td align="right">2020</td>
<td align="left">Aggregate</td>
<td align="left">2020/2020</td>
<td align="left">American Samoa</td>
</tr>
<tr class="odd">
<td align="left">Decennial Census of Island Areas: Guam Demographic and
Housing Characteristics</td>
<td align="left">dec/dhcgu</td>
<td align="right">2020</td>
<td align="left">Aggregate</td>
<td align="left">2020/2020</td>
<td align="left">Guam</td>
</tr>
<tr class="even">
<td align="left">Decennial Census of Island Areas: Commonwealth of the
Northern Mariana Islands Demographic and Housing Characteristics</td>
<td align="left">dec/dhcmp</td>
<td align="right">2020</td>
<td align="left">Aggregate</td>
<td align="left">2020/2020</td>
<td align="left">Commonwealth of the Northern Mariana Islands</td>
</tr>
<tr class="odd">
<td align="left">Decennial Census of Island Areas: U.S. Virgin Islands
Demographic and Housing Characteristics</td>
<td align="left">dec/dhcvi</td>
<td align="right">2020</td>
<td align="left">Aggregate</td>
<td align="left">2020/2020</td>
<td align="left">U.S. Virgin Islands</td>
</tr>
<tr class="even">
<td align="left">Decennial Census: Demographic Profile</td>
<td align="left">dec/dp</td>
<td align="right">2020</td>
<td align="left">Aggregate</td>
<td align="left">2020/2020</td>
<td align="left">United States</td>
</tr>
<tr class="odd">
<td align="left">Decennial Census of Island Areas: American Samoa
Demographic Profile</td>
<td align="left">dec/dpas</td>
<td align="right">2020</td>
<td align="left">Aggregate</td>
<td align="left">2020/2020</td>
<td align="left">United States</td>
</tr>
<tr class="even">
<td align="left">Decennial Census of Island Areas: Guam Demographic
Profile</td>
<td align="left">dec/dpgu</td>
<td align="right">2020</td>
<td align="left">Aggregate</td>
<td align="left">2020/2020</td>
<td align="left">United States</td>
</tr>
<tr class="odd">
<td align="left">2020 Commonwealth of the Northern Mariana Islands
Demographic Profile</td>
<td align="left">dec/dpmp</td>
<td align="right">2020</td>
<td align="left">Aggregate</td>
<td align="left">2020/2020</td>
<td align="left">United States</td>
</tr>
<tr class="even">
<td align="left">Decennial Census of Island Areas: U.S. Virgin Islands
Demographic Profile</td>
<td align="left">dec/dpvi</td>
<td align="right">2020</td>
<td align="left">Aggregate</td>
<td align="left">2020/2020</td>
<td align="left">United States</td>
</tr>
<tr class="odd">
<td align="left">Decennial Census: Decennial Post-Enumeration
Survey</td>
<td align="left">dec/pes</td>
<td align="right">2020</td>
<td align="left">Aggregate</td>
<td align="left">2020/2020</td>
<td align="left">US</td>
</tr>
<tr class="even">
<td align="left">Decennial Census: Redistricting Data (PL 94-171)</td>
<td align="left">dec/pl</td>
<td align="right">2020</td>
<td align="left">Aggregate</td>
<td align="left">2020/2020</td>
<td align="left">United States</td>
</tr>
<tr class="odd">
<td align="left">Decennial Census: Decennial Self-Response Rate</td>
<td align="left">dec/responserate</td>
<td align="right">2020</td>
<td align="left">Aggregate</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="dataset-types">Dataset types<a class="anchor" aria-label="anchor" href="#dataset-types"></a>
</h3>
<p>There are three types of datasets included in the Census Bureau API
universe: aggregate, microdata, and timeseries. These type names were
defined by the Census Bureau and are included as a column in
<code><a href="../reference/listCensusApis.html">listCensusApis()</a></code>.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">apis</span><span class="op">$</span><span class="va">type</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Aggregate  Microdata Timeseries </span></span>
<span><span class="co">#&gt;        624        895         81</span></span></code></pre>
<p>Most users will work with summary data, either aggregate or
timeseries. Summary data contains pre-calculated numbers or percentages
for a given statistic — like the number of children in a state or the
median household income. The examples below and in the broader <a href="https://www.hrecht.com/censusapi/articles/example-list.html">list
of censusapi examples</a> use summary data.</p>
<p>Aggregate datasets, like the American Community Survey or Decennial
Census, include data for only one time period (a <code>vintage</code>),
usually one year. Datasets like the American Community Survey contain
thousands of these pre-computed variables.</p>
<p>Timeseries datasets, including the Small Area Income and Poverty
Estimates, the Quarterly Workforce Estimates, and International Trade
statistics, allow users to query data over time in a single API
call.</p>
<p>Microdata contains the individual-level responses for a survey for
use in custom analysis. One row represents one person. Only advanced
analysts will want to use microdata. Learn more about what microdata is
and how to use it with <code>censusapi</code> in <a href="https://www.hrecht.com/censusapi/articles/accessing-microdata.html">Accessing
microdata</a>.</p>
</div>
</div>
<div class="section level2">
<h2 id="variable-groups">Variable groups<a class="anchor" aria-label="anchor" href="#variable-groups"></a>
</h2>
<p>For some surveys, including the American Community Survey and
Decennial Census, you can get many related variables at once using a
variable <code>group</code>. These groups are defined by the Census
Bureau. In some other data tools, like <a href="https://data.census.gov/cedsci/" class="external-link">data.census.gov</a>, this concept
is referred to as a <code>table</code>.</p>
<p>Some groups have several dozen variables, others just have a few. As
an example, we’ll use the American Community Survey to get the estimate,
margin of error and annotations for median household income in the past
12 months for Census places (cities, towns, etc) in Alabama using group
<code>B19013</code>.</p>
<p>First, see descriptions of the variables in group B19013:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">group_B19013</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/listCensusMetadata.html">listCensusMetadata</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"acs/acs5"</span>,</span>
<span>    vintage <span class="op">=</span> <span class="fl">2022</span>,</span>
<span>    type <span class="op">=</span> <span class="st">"variables"</span>,</span>
<span>    group <span class="op">=</span> <span class="st">"B19013"</span><span class="op">)</span></span>
<span><span class="va">group_B19013</span></span></code></pre></div>
<div class="kable-table">
<table style="width:100%;" class="table">
<colgroup>
<col width="4%">
<col width="43%">
<col width="31%">
<col width="5%">
<col width="2%">
<col width="2%">
<col width="5%">
<col width="4%">
</colgroup>
<thead><tr class="header">
<th align="left">name</th>
<th align="left">label</th>
<th align="left">concept</th>
<th align="left">predicateType</th>
<th align="left">group</th>
<th align="left">limit</th>
<th align="left">predicateOnly</th>
<th align="left">universe</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">B19013_001MA</td>
<td align="left">Annotation of Margin of Error!!Median household income
in the past 12 months (in 2022 inflation-adjusted dollars)</td>
<td align="left">Median Household Income in the Past 12 Months (in 2022
Inflation-Adjusted Dollars)</td>
<td align="left">string</td>
<td align="left">B19013</td>
<td align="left">0</td>
<td align="left">TRUE</td>
<td align="left">Households</td>
</tr>
<tr class="even">
<td align="left">B19013_001EA</td>
<td align="left">Annotation of Estimate!!Median household income in the
past 12 months (in 2022 inflation-adjusted dollars)</td>
<td align="left">Median Household Income in the Past 12 Months (in 2022
Inflation-Adjusted Dollars)</td>
<td align="left">string</td>
<td align="left">B19013</td>
<td align="left">0</td>
<td align="left">TRUE</td>
<td align="left">Households</td>
</tr>
<tr class="odd">
<td align="left">B19013_001E</td>
<td align="left">Estimate!!Median household income in the past 12 months
(in 2022 inflation-adjusted dollars)</td>
<td align="left">Median Household Income in the Past 12 Months (in 2022
Inflation-Adjusted Dollars)</td>
<td align="left">int</td>
<td align="left">B19013</td>
<td align="left">0</td>
<td align="left">TRUE</td>
<td align="left">Households</td>
</tr>
<tr class="even">
<td align="left">B19013_001M</td>
<td align="left">Margin of Error!!Median household income in the past 12
months (in 2022 inflation-adjusted dollars)</td>
<td align="left">Median Household Income in the Past 12 Months (in 2022
Inflation-Adjusted Dollars)</td>
<td align="left">int</td>
<td align="left">B19013</td>
<td align="left">0</td>
<td align="left">TRUE</td>
<td align="left">Households</td>
</tr>
</tbody>
</table>
</div>
<p>Now, retrieve the data using <code>vars = "group(B19013)"</code>. You
could alternatively manually list each variable as
<code>vars = c("NAME", "B19013_001E", "B19013_001EA", "B19013_001M", "B19013_001MA")</code>,
but using the groups is much easier.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">acs_income_group</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getCensus.html">getCensus</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"acs/acs5"</span>, </span>
<span>    vintage <span class="op">=</span> <span class="fl">2022</span>, </span>
<span>    vars <span class="op">=</span> <span class="st">"group(B19013)"</span>, </span>
<span>    region <span class="op">=</span> <span class="st">"place:*"</span>, </span>
<span>    regionin <span class="op">=</span> <span class="st">"state:01"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">acs_income_group</span><span class="op">)</span></span></code></pre></div>
<div class="kable-table">
<table class="table">
<colgroup>
<col width="5%">
<col width="5%">
<col width="11%">
<col width="12%">
<col width="11%">
<col width="12%">
<col width="16%">
<col width="24%">
</colgroup>
<thead><tr class="header">
<th align="left">state</th>
<th align="left">place</th>
<th align="right">B19013_001E</th>
<th align="left">B19013_001EA</th>
<th align="right">B19013_001M</th>
<th align="left">B19013_001MA</th>
<th align="left">GEO_ID</th>
<th align="left">NAME</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">01</td>
<td align="left">00100</td>
<td align="right">29263</td>
<td align="left">NA</td>
<td align="right">2846</td>
<td align="left">NA</td>
<td align="left">1600000US0100100</td>
<td align="left">Abanda CDP, Alabama</td>
</tr>
<tr class="even">
<td align="left">01</td>
<td align="left">00124</td>
<td align="right">35147</td>
<td align="left">NA</td>
<td align="right">15376</td>
<td align="left">NA</td>
<td align="left">1600000US0100124</td>
<td align="left">Abbeville city, Alabama</td>
</tr>
<tr class="odd">
<td align="left">01</td>
<td align="left">00460</td>
<td align="right">58631</td>
<td align="left">NA</td>
<td align="right">13426</td>
<td align="left">NA</td>
<td align="left">1600000US0100460</td>
<td align="left">Adamsville city, Alabama</td>
</tr>
<tr class="even">
<td align="left">01</td>
<td align="left">00484</td>
<td align="right">47188</td>
<td align="left">NA</td>
<td align="right">6288</td>
<td align="left">NA</td>
<td align="left">1600000US0100484</td>
<td align="left">Addison town, Alabama</td>
</tr>
<tr class="odd">
<td align="left">01</td>
<td align="left">00676</td>
<td align="right">53929</td>
<td align="left">NA</td>
<td align="right">35679</td>
<td align="left">NA</td>
<td align="left">1600000US0100676</td>
<td align="left">Akron town, Alabama</td>
</tr>
<tr class="even">
<td align="left">01</td>
<td align="left">00820</td>
<td align="right">89423</td>
<td align="left">NA</td>
<td align="right">6760</td>
<td align="left">NA</td>
<td align="left">1600000US0100820</td>
<td align="left">Alabaster city, Alabama</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level2">
<h2 id="advanced-geographies">Advanced geographies<a class="anchor" aria-label="anchor" href="#advanced-geographies"></a>
</h2>
<p>Some geographies, particularly Census tracts and blocks, need to be
specified within larger geographies like states and counties. This
varies by API endpoint, so make sure to read the documentation for your
specific API and run
<code>listCensusMetadata(type = "geographies")</code> to see the
available options.</p>
<p>Tract-level data from the 2010 Decennial Census can only be requested
from one state at a time. In this example, we use the built in
<code>fips</code> list of state <a href="https://www.census.gov/library/reference/code-lists/ansi.html" class="external-link">FIPS
codes</a> to request tract-level data from each state and join into a
single data frame.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tracts</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">f</span> <span class="kw">in</span> <span class="va">fips</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">stateget</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"state:"</span>, <span class="va">f</span>, sep<span class="op">=</span><span class="st">""</span><span class="op">)</span></span>
<span>    <span class="va">temp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getCensus.html">getCensus</a></span><span class="op">(</span></span>
<span>        name <span class="op">=</span> <span class="st">"dec/sf1"</span>,</span>
<span>        vintage <span class="op">=</span> <span class="fl">2010</span>,</span>
<span>        vars <span class="op">=</span> <span class="st">"P001001"</span>,</span>
<span>        region <span class="op">=</span> <span class="st">"tract:*"</span>,</span>
<span>        regionin <span class="op">=</span> <span class="va">stateget</span><span class="op">)</span></span>
<span>    <span class="va">tracts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">tracts</span>, <span class="va">temp</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co"># How many tracts are present?</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">tracts</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; [1] 73057</span></span></code></pre>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">tracts</span><span class="op">)</span></span></code></pre></div>
<div class="kable-table">
<table class="table">
<thead><tr class="header">
<th align="left">state</th>
<th align="left">county</th>
<th align="left">tract</th>
<th align="right">P001001</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">01</td>
<td align="left">001</td>
<td align="left">020100</td>
<td align="right">1912</td>
</tr>
<tr class="even">
<td align="left">01</td>
<td align="left">001</td>
<td align="left">020500</td>
<td align="right">10766</td>
</tr>
<tr class="odd">
<td align="left">01</td>
<td align="left">001</td>
<td align="left">020300</td>
<td align="right">3373</td>
</tr>
<tr class="even">
<td align="left">01</td>
<td align="left">001</td>
<td align="left">020400</td>
<td align="right">4386</td>
</tr>
<tr class="odd">
<td align="left">01</td>
<td align="left">001</td>
<td align="left">020200</td>
<td align="right">2170</td>
</tr>
<tr class="even">
<td align="left">01</td>
<td align="left">001</td>
<td align="left">020600</td>
<td align="right">3668</td>
</tr>
</tbody>
</table>
</div>
<p>The <code>regionin</code> argument of <code><a href="../reference/getCensus.html">getCensus()</a></code> can
also be used with a string of nested geographies, as shown below.</p>
<p>The 2010 Decennial Census summary file 1 requires you to specify a
state and county to retrieve block-level data. Use <code>region</code>
to request block level data, and <code>regionin</code> to specify the
desired state and county.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data2010</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getCensus.html">getCensus</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"dec/sf1"</span>,</span>
<span>    vintage <span class="op">=</span> <span class="fl">2010</span>,</span>
<span>    vars <span class="op">=</span> <span class="st">"P001001"</span>, </span>
<span>    region <span class="op">=</span> <span class="st">"block:*"</span>,</span>
<span>    regionin <span class="op">=</span> <span class="st">"state:36+county:027+tract:010000"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">data2010</span><span class="op">)</span></span></code></pre></div>
<div class="kable-table">
<table class="table">
<thead><tr class="header">
<th align="left">state</th>
<th align="left">county</th>
<th align="left">tract</th>
<th align="left">block</th>
<th align="right">P001001</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">36</td>
<td align="left">027</td>
<td align="left">010000</td>
<td align="left">1000</td>
<td align="right">31</td>
</tr>
<tr class="even">
<td align="left">36</td>
<td align="left">027</td>
<td align="left">010000</td>
<td align="left">1011</td>
<td align="right">17</td>
</tr>
<tr class="odd">
<td align="left">36</td>
<td align="left">027</td>
<td align="left">010000</td>
<td align="left">1028</td>
<td align="right">41</td>
</tr>
<tr class="even">
<td align="left">36</td>
<td align="left">027</td>
<td align="left">010000</td>
<td align="left">1001</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">36</td>
<td align="left">027</td>
<td align="left">010000</td>
<td align="left">1031</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">36</td>
<td align="left">027</td>
<td align="left">010000</td>
<td align="left">1002</td>
<td align="right">4</td>
</tr>
</tbody>
</table>
</div>
<p>For many more examples, frequently asked questions, troubleshooting,
and advanced topics check out <a href="https://www.hrecht.com/censusapi/articles/">all of the
articles</a>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Hannah Recht.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
